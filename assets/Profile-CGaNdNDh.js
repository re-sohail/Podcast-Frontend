import{c as x,d as h,r as c,b as d,e as g,j as t,L as m}from"./index-VkrfYMsM.js";import{S as f}from"./SinglePodcast-Crqi_qtQ.js";import{B as b,Y as j,Q as D}from"./ReactToastify-C4i9dTFj.js";function y(){let a=x(),o=h(),[l,s]=c.useState(),[i,n]=c.useState([]),u=async()=>{var r;try{let e=await d.get("https://podcast-api-gh6v.onrender.com/user-details",{withCredentials:!0});s((r=e==null?void 0:e.data)==null?void 0:r.data)}catch(e){console.log(e)}},p=async()=>{var r;try{let e=await d.get("https://podcast-api-gh6v.onrender.com/get-user-podcast",{withCredentials:!0});n((r=e==null?void 0:e.data)==null?void 0:r.data)}catch(e){console.log(e)}};return c.useEffect(()=>{u(),p()},[]),{userData:l,userPodcast:i,logout:async()=>{var r;try{let e=await d.post("https://podcast-api-gh6v.onrender.com/sign-out",{},{withCredentials:!0});b.success((r=e==null?void 0:e.data)==null?void 0:r.message,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:j}),setTimeout(()=>{a(g.logout()),o("/")},1e3)}catch(e){console.log(e)}}}}function v(){let{userData:a,userPodcast:o,logout:l}=y();return t.jsxs("div",{className:"x:hidden xs:block bg-[#f7ede8] w-full min-h-[90vh] xs:px-5 md:p-10",children:[t.jsx(D,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light","transition:Flip":!0}),t.jsxs("div",{className:"w-full xs:h-auto sm:h-[200px] border-b-2 border-[#4D4D4D] flex xs:items-start sm:items-center justify-between xs:flex-col xs:gap-5 sm:flex-row xs:py-5 sm:py-0",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold pb-4",children:a&&a.name}),t.jsx("h1",{className:"text-[#4D4D4D]",children:a&&a.username}),t.jsx("h1",{className:"text-[#4D4D4D]",children:a&&a.email})]}),t.jsxs("div",{className:"flex xs:items-start sm:items-center flex-col gap-4",children:[t.jsx(m,{to:"/profile/add-podcast",children:t.jsx("button",{className:"border select-none px-4 py-2 border-[#4D4D4D] rounded-md",children:"Add Podcast"})}),t.jsx("button",{onClick:()=>{l()},className:"border select-none px-4 py-2 bg-black text-[#f5f5f5] rounded-md",children:"Logout"})]})]}),t.jsx("h1",{className:"text-2xl font-semibold pt-5",children:"Uploaded Podcasts"}),t.jsx("div",{className:"grid xs:grid-cols-1 lg:grid-cols-2 gap-5 row-gap flex-wrap pt-5",children:o&&o.map((s,i)=>t.jsx(f,{image:s.image,title:s.title,description:s.description,audio:s.audio,category:s.category.categoryName,user:s.user.name,_id:s._id},i))})]})}function k(){return t.jsx(t.Fragment,{children:t.jsx(v,{})})}export{k as default};
